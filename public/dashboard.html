<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ADEdge · Dashboard</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg:#040714;
      --bg-alt:#070d1f;
      --panel:rgba(14,21,37,0.6);
      --panel-solid:#0c1327;
      --muted:#96a1bf;
      --muted-soft:rgba(150,161,191,0.65);
      --accent:#38e5ff;
      --accent-2:#816bff;
      --accent-soft:rgba(56,229,255,0.2);
      --text:#edf3ff;
      --text-soft:rgba(237,243,255,0.72);
      --border:rgba(255,255,255,0.08);
      --border-soft:rgba(255,255,255,0.04);
      --glass:rgba(11,19,39,0.55);
      --radius-lg:18px;
      --radius-md:14px;
      --shadow-sm:0 14px 30px rgba(7,13,31,0.25);
      --shadow-lg:0 32px 80px rgba(2,8,22,0.65);
      --noise:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='0.12'/%3E%3C/svg%3E");
    }
    *, *::before, *::after { box-sizing: border-box; }
    html {
      height: 100%;
      scroll-behavior: smooth;
    }
    body {
      min-height: 100%;
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(97,72,255,0.35), transparent 55%),
                  radial-gradient(circle at 80% 30%, rgba(35,213,255,0.25), transparent 50%),
                  var(--bg);
      color: var(--text);
      line-height: 1.55;
      position: relative;
      overflow-x: hidden;
      scrollbar-width: thin;
      scrollbar-color: var(--accent) rgba(9,15,30,0.6);
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: linear-gradient(130deg, rgba(60,118,255,0.18), rgba(32,210,255,0.05) 45%, rgba(129,107,255,0.26));
      filter: blur(80px);
      opacity: 0.75;
      animation: gradientShift 18s ease-in-out infinite alternate;
      z-index: -3;
    }
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background-image: var(--noise);
      mix-blend-mode: screen;
      opacity: 0.45;
      pointer-events: none;
      z-index: -2;
    }
    ::-webkit-scrollbar { width: 12px; }
    ::-webkit-scrollbar-track { background: rgba(6,10,24,0.55); border-radius: 12px; }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, rgba(56,229,255,0.85), rgba(129,107,255,0.9));
      border-radius: 12px;
      border: 3px solid rgba(5,9,21,0.9);
      box-shadow: 0 8px 22px rgba(60,118,255,0.35);
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, rgba(129,107,255,1), rgba(56,229,255,1));
      box-shadow: 0 12px 30px rgba(56,229,255,0.45);
    }

    a { color: inherit; }

    .container {
      width: min(1180px, 92vw);
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    /* Top bar */
    .topbar {
      position: sticky;
      top: 0;
      padding: 18px 0;
      backdrop-filter: blur(18px);
      background: linear-gradient(90deg, rgba(8,14,30,0.92), rgba(8,14,30,0.65));
      border-bottom: 1px solid rgba(255,255,255,0.04);
      z-index: 40;
      box-shadow: 0 18px 40px rgba(4,8,20,0.3);
    }
    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 16px;
      text-decoration: none;
    }
    .brand-logo {
      width: 54px;
      height: 54px;
      border-radius: 18px;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,0.08);
      background: linear-gradient(145deg, rgba(30,44,82,0.7), rgba(9,16,33,0.7));
      padding: 10px;
      box-shadow: 0 16px 36px rgba(20,28,58,0.45);
    }
    .brand-text strong {
      display: block;
      font-family: 'Space Grotesk', 'Inter', sans-serif;
      letter-spacing: 0.04em;
      font-size: 1.25rem;
    }
    .brand-text small {
      display: block;
      font-size: 0.78rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }
    .top-actions {
      display: flex;
      align-items: center;
      gap: 14px;
    }
    .link {
      color: var(--muted);
      text-decoration: none;
      font-size: 0.92rem;
      padding: 10px 14px;
      border-radius: 999px;
      transition: color 0.3s ease, background 0.3s ease;
    }
    .link:hover {
      color: var(--text);
      background: rgba(129,107,255,0.18);
    }

    /* Hero */
    .hero {
      position: relative;
      padding: 90px 0 110px;
      overflow: hidden;
    }
    .hero::before,
    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    .hero::before {
      background: radial-gradient(circle at 25% 20%, rgba(56,229,255,0.18), transparent 55%),
                  radial-gradient(circle at 80% 0%, rgba(129,107,255,0.32), transparent 60%);
      opacity: 0.8;
    }
    .hero::after {
      background-image: radial-gradient( ellipse at top, rgba(56,229,255,0.35), transparent 70% );
      filter: blur(40px);
      opacity: 0.45;
      transform: translate3d(0,-12%,0);
    }
    .aurora-band {
      position: absolute;
      top: -20%;
      left: 50%;
      width: 120vw;
      height: 120vw;
      background: conic-gradient(from 0deg, rgba(56,229,255,0.12), rgba(129,107,255,0.18), rgba(56,229,255,0.12));
      transform: translateX(-50%);
      filter: blur(90px);
      opacity: 0.6;
      animation: auroraDrift 26s linear infinite;
      z-index: -1;
    }
    .hero-inner {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      align-items: center;
      gap: 40px;
    }
    .hero-copy {
      grid-column: span 7;
      display: flex;
      flex-direction: column;
      gap: 22px;
    }
    .eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 0.78rem;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: var(--muted);
      background: rgba(18,28,58,0.52);
      border: 1px solid rgba(255,255,255,0.08);
      padding: 8px 16px;
      border-radius: 999px;
      backdrop-filter: blur(12px);
      box-shadow: 0 18px 40px rgba(5,12,32,0.4);
    }
    .hero h1 {
      font-family: 'Space Grotesk', 'Inter', sans-serif;
      font-size: clamp(2.5rem, 4vw, 3.7rem);
      margin: 0;
      letter-spacing: -0.015em;
      text-shadow: 0 18px 50px rgba(16,34,82,0.6);
    }
    .hero p {
      margin: 0;
      color: var(--text-soft);
      font-size: 1.05rem;
      max-width: 520px;
    }
    .hero-cta {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }
    .stat-card {
      grid-column: span 5;
      border-radius: var(--radius-lg);
      background: linear-gradient(160deg, rgba(9,16,33,0.72), rgba(18,33,70,0.5));
      border: 1px solid rgba(129,107,255,0.22);
      padding: 24px;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      backdrop-filter: blur(16px);
    }
    .stat-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(56,229,255,0.28), transparent 60%);
      opacity: 0.7;
    }
    .stat-card h3 {
      margin: 0 0 12px;
      font-family: 'Space Grotesk', 'Inter', sans-serif;
      letter-spacing: 0.06em;
      font-size: 0.9rem;
      text-transform: uppercase;
      color: rgba(237,243,255,0.78);
    }
    .stat-card strong {
      display: block;
      font-size: 2.4rem;
      letter-spacing: -0.02em;
      margin-bottom: 6px;
    }
    .stat-card span {
      color: rgba(237,243,255,0.6);
      font-size: 0.95rem;
    }

    /* Buttons */
    .btn {
      font-weight: 600;
      border-radius: 14px;
      padding: 12px 20px;
      border: 0;
      cursor: pointer;
      font-size: 0.95rem;
      transition: transform 0.22s cubic-bezier(.4,0,.2,1), box-shadow 0.22s ease, filter 0.22s ease;
      position: relative;
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
    .btn.primary {
      background: linear-gradient(135deg, rgba(56,229,255,1), rgba(129,107,255,1));
      color: #031229;
      box-shadow: 0 20px 40px rgba(46,142,255,0.35);
    }
    .btn.primary::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(255,255,255,0.28), transparent 55%);
      opacity: 0;
      transition: opacity 0.28s ease;
    }
    .btn.primary:hover::after {
      opacity: 1;
    }
    .btn.ghost {
      background: rgba(14,22,42,0.72);
      border: 1px solid var(--border);
      color: var(--text);
      box-shadow: 0 16px 36px rgba(7,16,38,0.36);
    }
    .btn.flat {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.08);
      color: var(--muted);
    }
    .btn:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: 0 20px 50px rgba(4,12,32,0.42);
    }
    .btn:active {
      transform: translateY(0) scale(0.99);
      filter: brightness(0.96);
    }

    /* Main grid */
    .main-grid-wrapper {
      position: relative;
      margin-top: -60px;
      padding-bottom: 110px;
    }
    .grid-glow {
      position: absolute;
      inset: -80px -40px -40px;
      background: radial-gradient(circle at top center, rgba(129,107,255,0.25), transparent 65%),
                  radial-gradient(circle at bottom left, rgba(56,229,255,0.22), transparent 60%);
      filter: blur(90px);
      opacity: 0.7;
      z-index: 0;
    }
    .main-grid {
      position: relative;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 24px;
      z-index: 1;
    }
    .card {
      background: linear-gradient(165deg, rgba(10,17,34,0.85), rgba(8,14,28,0.7));
      border-radius: var(--radius-lg);
      padding: 26px;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-sm);
      backdrop-filter: blur(18px);
      position: relative;
      overflow: hidden;
      transform-origin: center;
      transition: transform 0.4s cubic-bezier(.22,1,.36,1), box-shadow 0.4s ease, border-color 0.3s ease;
      opacity: 1;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(56,229,255,0.16), transparent 58%);
      opacity: 0.6;
      pointer-events: none;
    }
    .card::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      border: 1px solid rgba(255,255,255,0.05);
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
    }
    .card:hover {
      transform: translateY(-10px) scale(1.01);
      box-shadow: var(--shadow-lg);
      border-color: rgba(56,229,255,0.22);
    }
    .card:hover::after {
      opacity: 1;
    }
    .card.is-hidden {
      opacity: 0;
      transform: translateY(30px);
    }
    .card.revealed {
      opacity: 1;
      transform: translateY(0);
      transition: transform 0.7s cubic-bezier(.16,1,.3,1), opacity 0.7s ease;
    }
    .upload-card {
      grid-column: span 5;
      display: flex;
      flex-direction: column;
      gap: 18px;
      min-height: 340px;
    }
    .gallery-card {
      grid-column: span 7;
      display: flex;
      flex-direction: column;
      gap: 18px;
      min-height: 340px;
    }
    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 18px;
    }
    .card-header h2 {
      margin: 0;
      font-size: 1.3rem;
      letter-spacing: 0.04em;
      font-family: 'Space Grotesk', 'Inter', sans-serif;
    }
    .muted {
      color: var(--muted);
    }
    .small-muted {
      font-size: 0.78rem;
      color: var(--muted-soft);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    /* Dropzone */
    .dropzone-wrap {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    .dropzone {
      position: relative;
      display: flex;
      align-items: center;
      gap: 18px;
      border-radius: var(--radius-md);
      padding: 20px 24px;
      border: 1px dashed rgba(255,255,255,0.12);
      background: linear-gradient(135deg, rgba(13,23,44,0.8), rgba(16,27,50,0.6));
      cursor: pointer;
      transition: transform 0.35s cubic-bezier(.22,1,.36,1), border-color 0.35s ease, box-shadow 0.35s ease;
      overflow: hidden;
    }
    .dropzone::after {
      content: "";
      position: absolute;
      inset: -40%;
      background: conic-gradient(from 120deg, rgba(56,229,255,0.18), transparent, rgba(129,107,255,0.16));
      transform: rotate(0deg);
      animation: spinHalo 22s linear infinite;
      opacity: 0.35;
      pointer-events: none;
    }
    .drop-inner {
      display: flex;
      align-items: center;
      gap: 18px;
      position: relative;
      z-index: 1;
    }
    .drop-inner svg {
      width: 42px;
      height: 42px;
      opacity: 0.95;
    }
    .dropzone strong {
      font-size: 1.05rem;
      display: block;
      margin-bottom: 4px;
    }
    .dropzone:hover {
      transform: translateY(-6px) scale(1.01);
      border-color: rgba(56,229,255,0.55);
      box-shadow: 0 24px 52px rgba(6,14,32,0.5);
    }

    input[type="file"] { position: absolute; left: -9999px; }

    .file-chooser {
      display: flex;
      align-items: center;
      gap: 14px;
      flex-wrap: wrap;
    }
    .choose-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 11px 18px;
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      color: var(--text);
      cursor: pointer;
      transition: transform 0.22s ease, box-shadow 0.22s ease, border-color 0.22s ease;
    }
    .choose-btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 40px rgba(6,12,28,0.45);
      border-color: rgba(56,229,255,0.35);
    }
    .file-name {
      font-size: 0.85rem;
      color: var(--muted);
      max-width: 240px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .upload-controls {
      display: flex;
      gap: 18px;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 4px;
    }
    .preview {
      width: 68px;
      height: 68px;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.06);
      background: rgba(56,229,255,0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 0 20px rgba(56,229,255,0.2);
    }
    .preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    hr {
      border: 0;
      border-top: 1px solid rgba(255,255,255,0.05);
      margin: 12px 0;
    }

    .sxcu-row {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    .download-area {
      font-size: 0.85rem;
      color: var(--muted);
    }

    /* Gallery */
    .images-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 16px;
      margin-top: 10px;
    }
    .img-card {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.06);
      background: rgba(10,18,36,0.8);
      display: flex;
      flex-direction: column;
      position: relative;
      transition: transform 0.35s cubic-bezier(.22,1,.36,1), box-shadow 0.35s ease, border-color 0.35s ease;
      cursor: pointer;
      isolation: isolate;
    }
    .img-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 60%, rgba(56,229,255,0.18));
      opacity: 0;
      transition: opacity 0.35s ease;
      pointer-events: none;
    }
    .img-card:hover {
      transform: translateY(-10px) scale(1.01);
      box-shadow: 0 28px 60px rgba(7,14,32,0.55);
      border-color: rgba(129,107,255,0.28);
    }
    .img-card:hover::after {
      opacity: 1;
    }
    .img-thumb {
      width: 100%;
      height: 140px;
      object-fit: cover;
      background: #091226;
    }
    .img-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px;
      font-size: 0.9rem;
      color: var(--muted);
    }
    .meta-left {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .meta-name {
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .meta-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .meta-actions button,
    .meta-actions a {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.07);
      color: var(--muted);
      padding: 6px 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
      text-decoration: none;
      font-size: 0.78rem;
    }
    .meta-actions button:hover,
    .meta-actions a:hover {
      background: rgba(56,229,255,0.18);
      color: var(--text);
      transform: translateY(-2px);
    }

    .empty {
      padding: 34px;
      text-align: center;
      border-radius: 16px;
      background: rgba(255,255,255,0.02);
      border: 1px dashed rgba(255,255,255,0.06);
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(1,4,14,0.82);
      backdrop-filter: blur(12px);
      z-index: 80;
    }
    .modal.show { display: flex; }
    .modal-inner {
      position: relative;
      background: linear-gradient(160deg, rgba(8,14,28,0.95), rgba(15,24,48,0.9));
      padding: 22px 22px 26px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
      max-width: 960px;
      width: min(94vw, 960px);
      box-shadow: var(--shadow-lg);
    }
    .modal-inner img {
      max-width: 100%;
      max-height: 70vh;
      border-radius: 14px;
      display: block;
      margin-bottom: 18px;
      box-shadow: 0 24px 60px rgba(5,10,24,0.65);
    }
    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Footer */
    .footer {
      padding: 50px 0 80px;
      text-align: center;
      color: var(--muted);
      font-size: 0.85rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    /* Animations */
    @keyframes gradientShift {
      0% { transform: translate3d(-5%, -4%, 0) scale(1.05); }
      50% { transform: translate3d(6%, 2%, 0) scale(1.02); }
      100% { transform: translate3d(-3%, 6%, 0) scale(1.06); }
    }
    @keyframes auroraDrift {
      0% { transform: translateX(-50%) rotate(0deg); }
      50% { transform: translateX(-48%) rotate(8deg); }
      100% { transform: translateX(-50%) rotate(16deg); }
    }
    @keyframes spinHalo {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
      }
    }

    @media (max-width: 1180px) {
      .hero-inner {
        grid-template-columns: 1fr;
        text-align: center;
      }
      .hero-copy {
        grid-column: auto;
        align-items: center;
      }
      .hero p { max-width: none; }
      .stat-card {
        grid-column: auto;
      }
    }

    @media (max-width: 980px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
      .upload-card,
      .gallery-card {
        grid-column: auto;
      }
      .topbar-inner {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    @media (max-width: 640px) {
      .hero {
        padding: 70px 0 90px;
      }
      .upload-controls {
        flex-direction: column;
        align-items: stretch;
      }
      .preview {
        width: 100%;
        height: 140px;
      }
      .file-chooser {
        flex-direction: column;
        align-items: stretch;
      }
      .file-name {
        max-width: none;
      }
    }
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="container topbar-inner">
      <a class="brand" href="/" aria-label="ADEdge Home">
        <img src="/public/adsetups.png" alt="adsetups" class="brand-logo" onerror="this.style.display='none'">
        <div class="brand-text">
          <strong>ADEdge</strong>
          <small>Photon CDN Dashboard</small>
        </div>
      </a>

      <nav class="top-actions" aria-label="Top actions">
        <a class="link" href="/settings.html" id="settingsLink">Settings</a>
        <button id="logoutBtn" class="btn ghost" type="button">Log out</button>
      </nav>
    </div>
  </header>

  <section class="hero" aria-labelledby="heroTitle">
    <div class="aurora-band" aria-hidden="true"></div>
    <div class="container hero-inner">
      <div class="hero-copy">
        <span class="eyebrow">Edge-native CDN excellence</span>
        <h1 id="heroTitle">Distribuie imagini &amp; video cu un dashboard premium, pregătit de scalare.</h1>
        <p>ADEdge transformă livrarea media într-o experiență hiper-rapidă. Încarcă, gestionează și partajează instant resurse la calitatea cerută de campanii globale.</p>
        <div class="hero-cta">
          <a class="btn primary" href="#main">Începe încărcarea</a>
          <span class="muted">Deploy. Deliver. Delight.</span>
        </div>
      </div>
      <aside class="stat-card" aria-label="Status card">
        <h3>Rețea activă</h3>
        <strong>248 PoP-uri</strong>
        <span>+12 noduri noi în ultimele 24h</span>
      </aside>
    </div>
  </section>

  <div class="main-grid-wrapper" id="main">
    <div class="grid-glow" aria-hidden="true"></div>
    <main class="container main-grid">
      <section class="card upload-card" aria-labelledby="uploadTitle">
        <div class="card-header">
          <div>
            <h2 id="uploadTitle">Upload</h2>
            <p class="muted">Trage și eliberează sau alege un fișier pentru a-l urca (protejat cu token)</p>
          </div>
          <div class="small-muted">Flux rapid</div>
        </div>

        <div class="dropzone-wrap">
          <label class="dropzone" id="dropzone" tabindex="0" aria-label="Drop image here or click to select">
            <div class="drop-inner">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v10" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><path d="M5 10l7-7 7 7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
              <div>
                <strong>Drop media aici</strong>
                <div class="muted">sau apasă butonul de mai jos pentru a selecta un fișier</div>
              </div>
            </div>
          </label>

          <div class="file-chooser" role="group" aria-label="File chooser">
            <input type="file" id="fileInput" name="file" accept="image/*" aria-hidden="true">
            <button id="chooseBtn" type="button" class="choose-btn">Alege fișier</button>
            <div class="file-name" id="fileName">Niciun fișier ales</div>
          </div>
        </div>

        <form id="uploadForm" class="upload-form" novalidate>
          <div class="upload-controls">
            <button type="submit" class="btn primary">Încarcă acum</button>
            <div class="preview" id="filePreview" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M5 13v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 10l4-4 4 4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 6v8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <div id="uploadStatus" class="muted" aria-live="polite" style="opacity:0.9"></div>
          </div>
        </form>

        <hr />

        <h3>Generate .sxcu</h3>
        <div class="sxcu-row">
          <button id="genBinary" class="btn flat" type="button">Generate .sxcu (Binary)</button>
          <button id="genMultipart" class="btn flat" type="button">Generate .sxcu (Multipart)</button>
          <div id="downloadLink" class="download-area" aria-live="polite"></div>
        </div>
      </section>

      <section class="card gallery-card" aria-labelledby="galleryTitle">
        <div class="card-header">
          <h2 id="galleryTitle">Galerie</h2>
          <div class="muted">Upload-uri recente</div>
        </div>

        <div id="imagesGrid" class="images-grid" role="list" aria-live="polite"></div>

        <div id="galleryEmpty" class="empty muted" hidden>
          Nu există imagini încă — încarcă primul tău fișier pentru a începe.
        </div>
      </section>
    </main>
  </div>

  <footer class="container footer">
    <small class="muted">ADEdge • Token-protected uploads • Gestionează token-ul în Settings</small>
  </footer>

  <div id="previewModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-inner">
      <button id="modalClose" style="position:absolute;right:18px;top:16px;background:transparent;border:0;color:var(--text);font-size:22px;cursor:pointer">✕</button>
      <img id="modalImg" src="" alt="Preview">
      <div class="modal-actions" style="margin-top:8px">
        <button id="copyUrl" class="btn flat" type="button">Copiază URL</button>
        <a id="openInNew" class="btn primary" href="#" target="_blank" rel="noopener">Deschide</a>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const dropzone = document.getElementById('dropzone');
      const fileInput = document.getElementById('fileInput');
      const chooseBtn = document.getElementById('chooseBtn');
      const fileNameEl = document.getElementById('fileName');
      const uploadForm = document.getElementById('uploadForm');
      const filePreview = document.getElementById('filePreview');
      const uploadStatus = document.getElementById('uploadStatus');
      const genBinary = document.getElementById('genBinary');
      const genMultipart = document.getElementById('genMultipart');
      const downloadLink = document.getElementById('downloadLink');
      const imagesGrid = document.getElementById('imagesGrid');
      const galleryEmpty = document.getElementById('galleryEmpty');

      const previewModal = document.getElementById('previewModal');
      const modalImg = document.getElementById('modalImg');
      const modalClose = document.getElementById('modalClose');
      const copyUrlBtn = document.getElementById('copyUrl');
      const openInNew = document.getElementById('openInNew');

      const FALLBACK_BASE = '/uploads/imagine/';

      function getStoredToken(){ return localStorage.getItem('uploadToken') || null; }
      function setStoredToken(t){ if(t) localStorage.setItem('uploadToken', t); else localStorage.removeItem('uploadToken'); }
      void setStoredToken;

      chooseBtn.addEventListener('click', () => fileInput.click());
      dropzone.addEventListener('click', () => fileInput.click());

      ['dragenter','dragover'].forEach(ev => dropzone.addEventListener(ev, e => {
        e.preventDefault();
        dropzone.style.borderColor = 'rgba(56,229,255,0.7)';
        dropzone.style.transform = 'translateY(-8px) scale(1.01)';
      }));
      ['dragleave','drop'].forEach(ev => dropzone.addEventListener(ev, e => {
        e.preventDefault();
        dropzone.style.borderColor = '';
        dropzone.style.transform = '';
      }));
      dropzone.addEventListener('drop', e => {
        const f = e.dataTransfer.files && e.dataTransfer.files[0];
        if(f){ fileInput.files = e.dataTransfer.files; fileInput.dispatchEvent(new Event('change')); }
      });

      fileInput.addEventListener('change', () => {
        const f = fileInput.files && fileInput.files[0];
        if(!f){
          fileNameEl.textContent = 'Niciun fișier ales';
          filePreview.innerHTML = '<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M5 13v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 10l4-4 4 4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 6v8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>';
          return;
        }
        fileNameEl.textContent = f.name || 'file';
        const url = URL.createObjectURL(f);
        filePreview.innerHTML = '<img src="'+url+'" alt="preview">';
      });

      uploadForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const f = fileInput.files && fileInput.files[0];
        if(!f){ showStatus('Selectează un fișier înainte de upload.'); return; }
        const fd = new FormData(); fd.append('file', f);
        const token = getStoredToken();
        try{
          showStatus('Se încarcă...');
          const res = await fetch('/api/upload', {
            method: 'POST',
            headers: token ? { 'Authorization': 'Bearer ' + token } : {},
            body: fd
          });
          if(!res.ok){
            const t = await res.text().catch(()=>null);
            throw new Error(t || 'Upload eșuat');
          }
          showStatus('Upload reușit ✨');
          fileInput.value = '';
          fileNameEl.textContent = 'Niciun fișier ales';
          filePreview.innerHTML = '<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M5 13v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 10l4-4 4 4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 6v8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>';
          await loadGallery();
        }catch(err){
          console.error(err);
          showStatus('Upload eșuat: ' + (err.message || err));
        }
      });

      async function generateSxcu(mode){
        const token = getStoredToken();
        try{
          showStatus('Generăm .sxcu...');
          const res = await fetch('/api/generate-sxcu?type='+encodeURIComponent(mode), {
            method: 'POST',
            headers: token ? { 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' } : { 'Content-Type': 'application/json' },
            body: JSON.stringify({ mode })
          });
          if(!res.ok){ const t = await res.text().catch(()=>null); throw new Error(t || 'Generare eșuată'); }
          const blob = await res.blob();
          const fileName = 'edge-' + mode + '.sxcu';
          const url = URL.createObjectURL(blob);
          downloadLink.innerHTML = '<a class="btn flat" href="'+url+'" download="'+fileName+'">Download '+fileName+'</a>';
          showStatus('.sxcu gata de descărcare');
        }catch(err){
          console.error(err);
          showStatus('Eroare generare .sxcu: ' + (err.message || err));
        }
      }
      genBinary && genBinary.addEventListener('click', () => generateSxcu('binary'));
      genMultipart && genMultipart.addEventListener('click', () => generateSxcu('multipart'));

      async function loadGallery(){
        try{
          imagesGrid.innerHTML = '<div class="muted">Se încarcă galeria…</div>';
          const res = await fetch('/api/images');
          if(!res.ok) throw new Error('Server returned ' + res.status);

          let parsed;
          try {
            parsed = await res.json();
          } catch (jsonErr) {
            const text = await res.text();
            console.warn('Fallback: /api/images returned non-JSON. Raw response:', text);
            parsed = text.split(/[\r\n]+/).map(s => s.trim()).filter(Boolean);
          }

          let items = Array.isArray(parsed) ? parsed.slice() : [];
          if(items.length === 0 && parsed && typeof parsed === 'object'){
            if(Array.isArray(parsed.files)) items = parsed.files.slice();
            else if(Array.isArray(parsed.images)) items = parsed.images.slice();
            else {
              items = Object.values(parsed).flat().filter(Boolean);
            }
          }

          if(!Array.isArray(items) || items.length === 0){
            imagesGrid.innerHTML = '';
            galleryEmpty.hidden = false;
            return;
          }

          const normalized = items.map(it => {
            if(typeof it === 'string'){
              const s = it.trim();
              if(/^https?:\/\//i.test(s) || s.startsWith('/')) return { url: s, name: s.split('/').pop() };
              return { url: FALLBACK_BASE + encodeURIComponent(s), name: s };
            }
            if(typeof it === 'object' && it !== null){
              const url = it.url || it.path || it.href || it.src || '';
              const name = it.name || (url && url.split('/').pop()) || '';
              if(url){
                if(!/^https?:\/\//i.test(url) && !url.startsWith('/')){
                  return { url: FALLBACK_BASE + encodeURIComponent(url), name };
                }
                return { url, name };
              }
              if(it.filename) return { url: FALLBACK_BASE + encodeURIComponent(it.filename), name: it.filename };
            }
            return null;
          }).filter(Boolean);

          galleryEmpty.hidden = true;
          imagesGrid.innerHTML = '';
          normalized.forEach(i => {
            const url = i.url;
            const name = i.name || (url.split('/').pop());
            const card = document.createElement('div'); card.className = 'img-card';
            const img = document.createElement('img'); img.className = 'img-thumb'; img.src = url; img.alt = name; img.loading = 'lazy';
            img.onerror = function(){ this.src = '/public/image-fallback.png'; };
            const meta = document.createElement('div'); meta.className = 'img-meta';
            const left = document.createElement('div'); left.className = 'meta-left';
            const nm = document.createElement('div'); nm.className = 'meta-name'; nm.textContent = name;
            left.appendChild(nm);
            const actions = document.createElement('div'); actions.className = 'meta-actions';
            const copyBtn = document.createElement('button'); copyBtn.type = 'button'; copyBtn.textContent = 'Copie';
            const openA = document.createElement('a'); openA.href = url; openA.target = '_blank'; openA.rel = 'noopener noreferrer'; openA.textContent = 'Deschide';
            actions.appendChild(copyBtn); actions.appendChild(openA);
            meta.appendChild(left); meta.appendChild(actions);
            card.appendChild(img); card.appendChild(meta);

            img.addEventListener('click', () => openPreview(url));
            copyBtn.addEventListener('click', (ev) => { ev.stopPropagation(); copyToClipboard(url); });

            imagesGrid.appendChild(card);
          });

        }catch(err){
          console.error('loadGallery error:', err);
          imagesGrid.innerHTML = '<div class="muted">Încărcare galerie eșuată — verifică endpointul <code>/api/images</code>.</div>';
        }
      }

      loadGallery();

      function openPreview(url){
        modalImg.src = url;
        previewModal.classList.add('show');
        previewModal.style.display = 'flex';
        openInNew.href = url;
        copyUrlBtn.onclick = () => copyToClipboard(url);
      }
      function closeModal(){
        previewModal.style.display = 'none';
        previewModal.classList.remove('show');
        modalImg.src = '';
      }
      modalClose.addEventListener('click', closeModal);
      previewModal.addEventListener('click', (ev) => { if(ev.target === previewModal) closeModal(); });

      async function copyToClipboard(text){
        try{
          await navigator.clipboard.writeText(text);
          showStatus('URL copiat în clipboard');
        }catch(e){
          const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
          try{ document.execCommand('copy'); showStatus('URL copiat'); }catch(err){ showStatus('Copy eșuat'); }
          ta.remove();
        }
      }

      function showStatus(msg){
        if(!uploadStatus) return;
        uploadStatus.textContent = msg;
        clearTimeout(uploadStatus._t);
        uploadStatus.style.opacity = '1';
        uploadStatus._t = setTimeout(()=> uploadStatus.style.opacity = '0.75', 3200);
      }

      (function revealCards(){
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => card.classList.add('is-hidden'));
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if(entry.isIntersecting){
              entry.target.classList.add('revealed');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.18 });
        cards.forEach(card => observer.observe(card));
      })();

      window.addEventListener('keydown', (e) => {
        if(e.key.toLowerCase() === 'u' && !/input|textarea/i.test(document.activeElement.tagName)) fileInput.click();
      });

      document.addEventListener('visibilitychange', () => { if(document.visibilityState === 'visible') loadGallery(); });
    })();
  </script>
</body>
</html>
